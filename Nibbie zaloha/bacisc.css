:root {
  --bg: #222;
  --panel: #111;
  --accent: #0633af;
  --hud-text: #e8f4ff; /* light text for HUD for better contrast */
  --hud-bg: rgba(6,8,12,0.72);
}
html,body{height:100%;margin:0;}
body{
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(#311004,var(--bg));
  color:white;
  font-family: "PressStart2P", monospace;
}
/* avoid horizontal scrollbar and keep layout responsive */
html, body { overflow-x: hidden; }
#game{
  max-width:650px;
  margin:0 auto;
  position:relative;
  /* keep the container height similar to canvas to help vertical centering */
  height:800px;
}
canvas{
  width: 100%;
  max-width: 650px;
  height: 800px;
  display:block;
  image-rendering: pixelated;
  background-image: url('OdosťKrajšieCanvasPozadie.png'); /*sem pridam nase pixel posadie pre hru*/
  border:4px solid #333;
  justify-self:center;
}
#hud{
  background:var(--panel);
  padding:12px;
  border-radius:6px;
  width: 380px;
  height: 720px; /* predĺžené trochu zospodu */
  position:absolute;
  left: -480px; /* place HUD farther to the left of the centered canvas */
  top:50%;
  transform:translateY(-50%);
  overflow:auto; /* allow scrolling if viewport is small */
  background-image: url(''); /*sem pridam nase pixel posadie pre hud*/
  background-repeat: repeat;
  
  background-size: 220px 220px;
  image-rendering: pixelated;


  /* stronger translucent background for contrast with text */
  background-color: var(--hud-bg);
  background-blend-mode: overlay;
  color: var(--hud-text);
  border: 1px solid rgba(255,255,255,0.04);
  box-shadow: 0 8px 30px rgba(0,0,0,0.6);

}
button{display:inline-block;margin:0 6px 8px;padding:8px;border:none;background:var(--accent);color:#000;cursor:pointer;}
/* controls container: center buttons and keep them side-by-side */
.controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px;align-items:center;justify-items:center;margin-bottom:12px}

/* style HUD buttons to match the meter label (font, size, color) */
#hud .controls button{
  background:transparent;
  border:2px solid var(--accent);
  color:var(--hud-text);
  font-size:16px;
  letter-spacing:1px;
  text-transform:uppercase;
  text-shadow:2px 2px 0 #000;
  font-weight:700;
  padding:8px 10px;
  font-family:inherit;
  width:100%;
  box-sizing:border-box;
  text-align:center;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Ensure wrappers inside controls also fill their grid cell */
.controls .feed-wrap,
.controls .charge-wrap{width:100%;display:flex;justify-content:center}
.controls .feed-wrap > button,
.controls .charge-wrap > button{width:auto;flex:1 1 auto}

/* feed picker UI */
.feed-wrap{display:inline-block}

/* charge button with cooldown indicator */
.charge-wrap{position:relative;display:inline-block}
.cooldown{position:absolute;bottom:100%;left:50%;transform:translateX(-50%);margin-bottom:6px;font-size:24px;font-weight:900;color:#ff6b6b;letter-spacing:2px;text-align:center;min-width:60px;text-shadow:2px 2px 4px rgba(0,0,0,0.8);background:rgba(0,0,0,0.7);padding:6px 12px;border:2px solid #ff6b6b;border-radius:6px}
.cooldown.hidden{display:none}

/* Minigame modal */
.minigame-modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  background: rgba(0,0,0,0.35);
  padding:20px;
}
.minigame-modal.hidden{display:none}
.minigame-panel{width:320px;max-width:95%;background:rgba(0,0,0,0.95);border:3px solid var(--accent);padding:16px;border-radius:8px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,0.6)}

/* When anchored to the HUD we position the panel absolutely inside the overlay and allow JS to place it */
.minigame-modal.hud .minigame-panel{
  position:absolute;
  transform:translate(-50%,-100%);
  will-change:transform,left,top;
}

/* Pop-in animation for modal panel */
@keyframes popIn {
  0% { transform: translateY(-8px) scale(0.96); opacity: 0; }
  60% { transform: translateY(6px) scale(1.02); opacity: 1; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}
.minigame-modal:not(.hidden) .minigame-panel{
  animation: popIn 220ms cubic-bezier(.2,.9,.2,1);
  transform-origin: center center;
}
.minigame-header{font-size:18px;color:var(--accent);font-weight:800;margin-bottom:8px}
.minigame-panel select{width:100%;padding:8px;margin-bottom:10px;background:transparent;border:2px solid var(--accent);color:#fff}
.minigame-actions{display:flex;gap:8px;justify-content:center}
.minigame-actions button{padding:8px 12px;border:2px solid var(--accent);background:transparent;color:var(--hud-text);font-weight:700;min-width:110px}
.cooldown.hidden{display:none}

/* Shop styles */
.shop-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid rgba(255,255,255,0.03)}
.shop-item button{padding:6px 10px;border:2px solid var(--accent);background:transparent;color:var(--hud-text);font-weight:700}

/* Achievements */
#achieveBody{max-height:260px;overflow:auto;text-align:left}
.achievement{padding:6px;border-bottom:1px solid rgba(255,255,255,0.03)}
.achievement.locked{opacity:0.4}

/* small status badge for coins */
.status-row{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-bottom:8px}
.badge{background:var(--accent);color:#fff;padding:4px 8px;border-radius:6px;font-weight:800}

/* Buttons: hover / active polish */
button{transition: transform 120ms ease, box-shadow 120ms ease, background 160ms ease}
button:hover{transform: translateY(-3px); box-shadow: 0 6px 18px rgba(6,51,175,0.18)}
button:active{transform: translateY(-1px) scale(0.995)}

/* Enhanced modal backdrop blur and subtle vignette */
.minigame-modal{backdrop-filter: blur(3px) saturate(1.1)}
.minigame-panel{transition: transform 220ms cubic-bezier(.2,.9,.2,1), opacity 220ms}

/* HUD powered-off visual state: dim bars and labels to indicate frozen status */
#hud.powered-off{opacity:0.9}
#hud.powered-off .pixel-progress .step{opacity:0.28;filter:grayscale(80%);box-shadow:none}
#hud.powered-off .meter .label{opacity:0.5}
#hud.powered-off .badge{opacity:0.5}
#hud.powered-off button{opacity:0.6}

/* Pixel-progress smooth fill */
.pixel-progress .step{transition: background 300ms ease, box-shadow 300ms ease}

/* coin badge pulse */
.badge.pulse{animation: coinPulse 700ms cubic-bezier(.2,.9,.2,1)}
@keyframes coinPulse{0%{transform:translateY(0) scale(1)}25%{transform:translateY(-6px) scale(1.12)}60%{transform:translateY(0) scale(1.03)}100%{transform:translateY(0) scale(1)}}

/* toast notifications */
#toasts{position:fixed;right:22px;bottom:22px;z-index:20000;display:flex;flex-direction:column;gap:8px}
.toast{background:rgba(0,0,0,0.85);color:#fff;padding:10px 14px;border-radius:8px;border:2px solid rgba(255,255,255,0.04);box-shadow:0 8px 30px rgba(0,0,0,0.6);transform:translateX(120%);opacity:0}
.toast.show{animation: toastIn 340ms cubic-bezier(.2,.9,.2,1) forwards}
.toast.ok{border-color:var(--accent)}
@keyframes toastIn{0%{transform:translateX(120%);opacity:0}60%{transform:translateX(-8%);opacity:1}100%{transform:translateX(0);opacity:1}}

/* achievement banner */
.ach-banner{position:fixed;left:50%;top:18px;transform:translateX(-50%) translateY(-8px);background:linear-gradient(90deg,var(--accent),#09b3ff);color:#fff;padding:10px 18px;border-radius:8px;z-index:30000;box-shadow:0 8px 40px rgba(0,0,0,0.6);opacity:0}
.ach-banner.show{animation: achPop 1200ms cubic-bezier(.2,.9,.2,1) forwards}
@keyframes achPop{0%{transform:translateX(-50%) translateY(-8px) scale(0.96); opacity:0}10%{opacity:1}50%{transform:translateX(-50%) translateY(8px) scale(1.06)}100%{transform:translateX(-50%) translateY(0) scale(1)}}

/* subtle sparkle for unlocked achievement (pseudo-element on banner) */
.ach-banner::after{content:'';position:absolute;right:8px;top:6px;width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,0.9);box-shadow:0 0 18px rgba(255,255,255,0.6);filter:blur(2px);opacity:0.9}

/* shop item hover */
.shop-item:hover{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));}

/* inventory small badges */
.inventory{display:flex;flex-wrap:wrap;gap:6px;align-items:center;margin-top:8px;max-width:100%}
.inventory .inv-item{display:flex;gap:6px;align-items:center;padding:4px 6px;border:2px solid rgba(255,255,255,0.03);border-radius:6px;flex:0 0 48%;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:12px}
.inventory .count{background:rgba(255,255,255,0.06);padding:2px 6px;border-radius:4px;font-weight:700}

/* item select + use button under HUD */
.item-use{display:flex;gap:8px;align-items:center;justify-content:flex-start;margin-top:12px}
.item-use .small-label{font-size:16px;color:var(--hud-text);letter-spacing:1px;text-transform:uppercase;font-weight:700;margin-right:6px}
.item-use select{padding:6px 8px;border:2px solid var(--accent);background:transparent;color:#fff;font-family:inherit}
.item-use button#useBtn{padding:6px 10px;border:2px solid var(--accent);background:transparent;color:var(--hud-text);font-weight:700;cursor:pointer}

/* thumbnail for selected item (fries texture) */
.item-thumb{width:40px;height:40px;object-fit:contain;border:2px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.25);padding:2px;border-radius:4px}
.item-thumb.hidden{display:none}
progress{width:100%;}

/* Pixel-style segmented progress bar */
.meters{margin-top:8px;}
.meter{margin-bottom:10px;}
.meter .label{
  font-size:18px;
  margin-bottom:6px;
  color:var(--accent);
  letter-spacing:1px;
  text-transform:uppercase;
}
.pixel-progress{display:flex;gap:4px;align-items:center}
.pixel-progress .step{
  width: 32px;
  height: 40px;
  background:#222;
  border:2px solid #000;
  box-sizing:border-box;
}
.pixel-progress .step.filled{
  background:var(--accent);
  box-shadow: inset -2px -2px 0 rgba(0,0,0,0.15);
}

/* keep native progress small for mood/energy */
progress{height:12px}

#hud .meter .label{
  font-size:20px;
  color:var(--hud-text);
  letter-spacing:2px;
  text-shadow: 2px 2px 0 #000;
  margin-bottom:8px;
  text-transform:uppercase;
  font-weight:700;
}

/* Floating clear cosmetics button on the right side */
#clearCosmeticsBtn{
  position:fixed;
  right:18px;
  top:50%;
  transform:translateY(-50%);
  z-index:30010;
  padding:10px 12px;
  border:2px solid var(--accent);
  background:transparent;
  color:var(--hud-text);
  font-weight:800;
  border-radius:8px;
  cursor:pointer;
  box-shadow:0 8px 24px rgba(0,0,0,0.6);
}
#clearCosmeticsBtn:hover{transform:translateY(-50%) translateY(-3px);}